<% entity = @entity %>
<div class="clearing header segment">
  <div class="container">
    <h1 class="ui header">
      <%= entity.name %>
    </h1>
    <div class="ui divider"></div>
    <%= link_to 'Add Contact',
                new_entity_contact_path(entity,
                :return_url => request.original_url),
                :class => 'ui basic button' %>
    <%= link_to 'Add Location',
                new_entity_location_path(entity,
                :return_url => request.original_url),
                :class => 'ui basic button' %>
  </div>
</div>
<div class="main container">
  <h4 class="ui dividing header">
    Entity Information
  </h4>
  <div class="ui grid">
    <div class="two column row">
      <label class="column">Reference</label>
      <div class="column"><%= entity.reference %></div>
    </div>
    <div class="two column row">
      <label class="column">Name</label>
      <div class="column"><%= entity.name %></div>
    </div>
    <div class="two column row">
      <label class="column">Display Name</label>
      <div class="column"><%= entity.display_name %></div>
    </div>
    <div class="two column row">
      <label class="column">UUID</label>
      <div class="column"><%= entity.uuid %></div>
    </div>
  </div>
  <div class="ui basic segment">
    <%= edit_entity_link(entity,
                         request.original_url,
                         :class => 'ui basic button right floated floating') %>
    <%= link_to 'Delete', entity_path(entity),
      :class => 'ui basic button right floated',
      :data => { :confirm => 'Are you sure?' },
      :method => :delete %>
    <%= link_to 'Versions', versions_path('entity', entity.id, :return_url => request.original_url),
          :class => 'ui basic button right floated' %>
  </div>
  <h4 class="ui dividing header">
    Contacts
  </h4>
  <div id="contacts">
  <%= render :partial => 'contacts', :locals => { :contacts => entity.contacts } %>
  </div>
  <h4 class="ui dividing header">
    Locations
  </h4>
  <div id="locations">
  <%= render :partial => 'locations', :locals => { :locations => entity.locations } %>
  </div>
  <h4 class="ui dividing header">Customer</h4>
  <% if entity.customer %>
  <%= render :partial => '/entities/customer/detail',
             :locals => { :customer => entity.customer } %>
  <% else %>
  <%= render :partial => '/entities/customer/empty' %>
  <% end %>
  <div class="ui basic segment" id="customer-actions">
    <%= customer_link(
          entity,
          request.original_url,
          :class => 'ui basic button right floated floating') %>
    <%= versions_link('customer',
                      entity.customer,
                      request.original_url,
                      :class => 'ui basic button right floated') %>
  </div>
  <h4 class="ui dividing header">Salesperson</h4>
  <% if entity.salesperson %>
  <%= render :partial => '/entities/salesperson/detail',
             :locals => { :salesperson => entity.salesperson } %>
  <% else %>
  <%= render :partial => '/entities/salesperson/empty' %>
  <% end %>
  <div class="ui basic segment" id="salesperson-actions">
    <%= salesperson_link(
          entity,
          request.original_url,
          :class => 'ui basic button right floated floating') %>
    <%= delete_salesperson_link(
          entity,
          request.original_url,
          :class => 'ui basic button right floated floating') %>
    <%= versions_link('salesperson',
                      entity.salesperson,
                      request.original_url,
                      :class => 'ui basic button right floated') %>
  </div>
</div>
