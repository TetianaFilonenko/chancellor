  [1m[36mActiveRecord::SchemaMigration Load (22.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36m (153.1ms)[0m  [1mDROP DATABASE IF EXISTS `test_chancellor`[0m
  [1m[35m (0.6ms)[0m  CREATE DATABASE `test_chancellor` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (0.5ms)[0m  [1mDROP DATABASE IF EXISTS `test_chancellor`[0m
  [1m[35m (0.3ms)[0m  CREATE DATABASE `test_chancellor` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (20.5ms)[0m  [1mCREATE TABLE `_promiscuous` (`id` int(11) auto_increment PRIMARY KEY, `batch` text, `at` datetime, `TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP` datetime) ENGINE=InnoDB[0m
  [1m[35m (20.2ms)[0m  CREATE TABLE `contacts` (`id` int(11) auto_increment PRIMARY KEY, `entity_id` int(11) NOT NULL, `first_name` varchar(255) NOT NULL, `last_name` varchar(255) NOT NULL, `display_name` varchar(255) NOT NULL, `title` varchar(255), `email_address` varchar(255), `fax_number` varchar(255), `mobile_number` varchar(255), `phone_number` varchar(255), `uuid` varchar(32) NOT NULL, `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `is_active` int(11) DEFAULT 1 NOT NULL, `_v` int(11)) ENGINE=InnoDB
  [1m[36m (14.0ms)[0m  [1mCREATE TABLE `customers` (`id` int(11) auto_increment PRIMARY KEY, `default_contact_id` int(11), `default_location_id` int(11), `entity_id` int(11) NOT NULL, `parent_customer_id` int(11), `reference` varchar(255) NOT NULL, `salesperson_id` int(11), `is_active` int(11) DEFAULT 1 NOT NULL, `uuid` varchar(32) NOT NULL, `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `_v` int(11)) ENGINE=InnoDB[0m
  [1m[35m (12.6ms)[0m  CREATE TABLE `entities` (`id` int(11) auto_increment PRIMARY KEY, `cached_long_name` varchar(1024) NOT NULL, `display_name` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `contact_name` varchar(255), `comments` varchar(255), `reference` varchar(255) NOT NULL, `uuid` varchar(32) NOT NULL, `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `parent_entity_id` int(11), `is_active` int(11) DEFAULT 1 NOT NULL, `_v` int(11)) ENGINE=InnoDB
  [1m[36m (17.7ms)[0m  [1mCREATE TABLE `locations` (`id` int(11) auto_increment PRIMARY KEY, `entity_id` int(11) NOT NULL, `location_name` varchar(255) NOT NULL, `street_address` varchar(255) NOT NULL, `city` varchar(255) NOT NULL, `region` varchar(255) NOT NULL, `region_code` varchar(255) NOT NULL, `country` varchar(255) NOT NULL, `uuid` varchar(32) NOT NULL, `latitude` decimal(10,8), `longitude` decimal(11,8), `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `is_active` int(11) DEFAULT 1 NOT NULL, `_v` int(11)) ENGINE=InnoDB[0m
  [1m[35m (23.0ms)[0m  CREATE TABLE `roles` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `resource_id` int(11), `resource_type` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
  [1m[36m (8.7ms)[0m  [1mCREATE  INDEX `index_roles_on_name_and_resource_type_and_resource_id` USING btree ON `roles` (`name`, `resource_type`, `resource_id`) [0m
  [1m[35m (11.9ms)[0m  CREATE  INDEX `index_roles_on_name` USING btree ON `roles` (`name`) 
  [1m[36m (22.6ms)[0m  [1mCREATE TABLE `salespeople` (`id` int(11) auto_increment PRIMARY KEY, `entity_id` int(11) NOT NULL, `gender` varchar(7), `location_id` int(11), `phone` varchar(255), `reference` varchar(255) NOT NULL, `uuid` varchar(32) NOT NULL, `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `default_location_id` int(11), `is_active` int(11) DEFAULT 1 NOT NULL, `_v` int(11)) ENGINE=InnoDB[0m
  [1m[35m (24.7ms)[0m  CREATE TABLE `users` (`id` int(11) auto_increment PRIMARY KEY, `email` varchar(255) DEFAULT '' NOT NULL, `encrypted_password` varchar(255) DEFAULT '' NOT NULL, `reset_password_token` varchar(255), `reset_password_sent_at` datetime, `remember_created_at` datetime, `sign_in_count` int(11) DEFAULT 0 NOT NULL, `current_sign_in_at` datetime, `last_sign_in_at` datetime, `current_sign_in_ip` varchar(255), `last_sign_in_ip` varchar(255), `confirmation_token` varchar(255), `confirmed_at` datetime, `confirmation_sent_at` datetime, `unconfirmed_email` varchar(255), `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `is_active` int(11) DEFAULT 1, `display_name` varchar(255) NOT NULL, `first_name` varchar(255) NOT NULL, `last_name` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (9.7ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_confirmation_token` USING btree ON `users` (`confirmation_token`) [0m
  [1m[35m (11.6ms)[0m  CREATE UNIQUE INDEX `index_users_on_email` USING btree ON `users` (`email`) 
  [1m[36m (14.2ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_reset_password_token` USING btree ON `users` (`reset_password_token`) [0m
  [1m[35m (20.7ms)[0m  CREATE TABLE `users_roles` (`user_id` int(11), `role_id` int(11)) ENGINE=InnoDB
  [1m[36m (28.1ms)[0m  [1mCREATE  INDEX `index_users_roles_on_user_id_and_role_id` USING btree ON `users_roles` (`user_id`, `role_id`) [0m
  [1m[35m (48.4ms)[0m  CREATE TABLE `vendors` (`id` int(11) auto_increment PRIMARY KEY, `default_contact_id` int(11), `default_location_id` int(11), `entity_id` int(11) NOT NULL, `reference` varchar(255) NOT NULL, `is_active` int(11) DEFAULT 1 NOT NULL, `uuid` varchar(32) NOT NULL, `deleted_at` datetime, `created_at` datetime, `updated_at` datetime, `_v` int(11)) ENGINE=InnoDB
  [1m[36m (19.8ms)[0m  [1mCREATE TABLE `version_associations` (`id` int(11) auto_increment PRIMARY KEY, `version_id` int(11), `foreign_key_name` varchar(255) NOT NULL, `foreign_key_id` int(11)) ENGINE=InnoDB[0m
  [1m[35m (6.3ms)[0m  CREATE  INDEX `index_version_associations_on_foreign_key` USING btree ON `version_associations` (`foreign_key_name`, `foreign_key_id`) 
  [1m[36m (6.1ms)[0m  [1mCREATE  INDEX `index_version_associations_on_version_id` USING btree ON `version_associations` (`version_id`) [0m
  [1m[35m (31.0ms)[0m  CREATE TABLE `versions` (`id` int(11) auto_increment PRIMARY KEY, `item_type` varchar(255) NOT NULL, `item_id` int(11) NOT NULL, `event` varchar(255) NOT NULL, `whodunnit` varchar(255), `object` text, `created_at` datetime, `object_changes` text, `transaction_id` int(11)) ENGINE=InnoDB
  [1m[36m (6.5ms)[0m  [1mCREATE  INDEX `index_versions_on_item_type_and_item_id` USING btree ON `versions` (`item_type`, `item_id`) [0m
  [1m[35m (8.2ms)[0m  CREATE  INDEX `index_versions_on_transaction_id` USING btree ON `versions` (`transaction_id`) 
  [1m[36m (22.7ms)[0m  [1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (12.3ms)[0m  CREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) 
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20150302011605')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36m (5022.6ms)[0m  [1mDROP DATABASE IF EXISTS "test_chancellor_engine"[0m
PG::ObjectInUse: ERROR:  database "test_chancellor_engine" is being accessed by other users
DETAIL:  There is 1 other session using the database.
: DROP DATABASE IF EXISTS "test_chancellor_engine"
  [1m[36m (4.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateEntities (20141122003246)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (3.5ms)[0m  [1mCREATE TABLE "entities" ("id" serial primary key, "cached_long_name" character varying(1024) NOT NULL, "display_name" character varying NOT NULL, "name" character varying NOT NULL, "contact_name" character varying, "comments" character varying, "primary_location_id" integer, "reference" character varying NOT NULL, "uuid" character varying(32) NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20141122003246"]]
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20141221184242)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20141221184242"]]
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddIsActiveToUser (20150107230109)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (4.2ms)[0m  ALTER TABLE "users" ADD "is_active" integer DEFAULT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150107230109"]]
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to AddNameToUsers (20150109230753)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "users" ADD "display_name" character varying NOT NULL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "first_name" character varying NOT NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "last_name" character varying NOT NULL
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150109230753"]]
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to RolifyCreateRoles (20150113210207)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "roles" ("id" serial primary key, "name" character varying, "resource_id" integer, "resource_type" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "users_roles" ("user_id" integer, "role_id" integer) [0m
  [1m[35m (0.7ms)[0m  CREATE  INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (0.7ms)[0m  [1mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (0.7ms)[0m  CREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150113210207"]]
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to CreateLocations (20150126203727)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "locations" ("id" serial primary key, "entity_id" integer NOT NULL, "location_name" character varying NOT NULL, "street_address" character varying NOT NULL, "city" character varying NOT NULL, "region" character varying NOT NULL, "region_code" character varying NOT NULL, "country" character varying NOT NULL, "uuid" character varying(32) NOT NULL, "latitude" decimal(10,8), "longitude" decimal(11,8), "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150126203727"]]
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to CreateVersions (20150130164850)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) 
  [1m[36m (0.7ms)[0m  [1mCREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150130164850"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddObjectChangesToVersions (20150130164851)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "versions" ADD "object_changes" text[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150130164851"]]
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateVersionAssociations (20150130165216)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "version_associations" ("id" serial primary key, "version_id" integer, "foreign_key_name" character varying NOT NULL, "foreign_key_id" integer) [0m
  [1m[35m (0.6ms)[0m  CREATE  INDEX  "index_version_associations_on_version_id" ON "version_associations"  ("version_id")
  [1m[36m (0.9ms)[0m  [1mCREATE  INDEX  "index_version_associations_on_foreign_key" ON "version_associations"  ("foreign_key_name", "foreign_key_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150130165216"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddTransactionIdColumnToVersions (20150130165217)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "versions" ADD "transaction_id" integer[0m
  [1m[35m (0.6ms)[0m  CREATE  INDEX  "index_versions_on_transaction_id" ON "versions"  ("transaction_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150130165217"]]
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateSalespeople (20150130195103)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "salespeople" ("id" serial primary key, "entity_id" integer NOT NULL, "gender" character varying(7), "location_id" integer, "phone" character varying, "reference" character varying NOT NULL, "uuid" character varying(32) NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150130195103"]]
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateDefaultLocations (20150131171824)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.3ms)[0m  CREATE TABLE "default_locations" ("id" serial primary key, "entity_id" integer NOT NULL, "entity_type" character varying NOT NULL, "location_id" integer NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (0.7ms)[0m  [1mCREATE  INDEX  "index_default_locations_on_entity_type_and_entity_id" ON "default_locations"  ("entity_type", "entity_id")[0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX  "ix_default_locations_entity_type_location" ON "default_locations"  ("entity_id", "entity_type", "location_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150131171824"]]
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to DeletePrimaryLocationIdFromEntity (20150204231641)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "entities" DROP "primary_location_id"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150204231641"]]
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to CreateCustomers (20150205180318)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "customers" ("id" serial primary key, "default_contact_id" integer, "default_location_id" integer, "entity_id" integer NOT NULL, "parent_customer_id" integer, "reference" character varying NOT NULL, "salesperson_id" integer, "is_active" integer DEFAULT 1 NOT NULL, "uuid" character varying(32) NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150205180318"]]
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to CreateContacts (20150205183705)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.6ms)[0m  CREATE TABLE "contacts" ("id" serial primary key, "entity_id" integer NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "display_name" character varying NOT NULL, "title" character varying, "email_address" character varying, "fax_number" character varying, "mobile_number" character varying, "phone_number" character varying, "uuid" character varying(32) NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150205183705"]]
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddDefaultLocationIdAndIsActiveToSalesperson (20150217163838)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "salespeople" ADD "default_location_id" integer
  [1m[36m (2.4ms)[0m  [1mALTER TABLE "salespeople" ADD "is_active" integer DEFAULT 1 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150217163838"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to DropDefaultLocations (20150217204110)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "default_locations"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150217204110"]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateVendors (20150217232755)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (3.3ms)[0m  [1mCREATE TABLE "vendors" ("id" serial primary key, "default_contact_id" integer, "default_location_id" integer, "entity_id" integer NOT NULL, "reference" character varying NOT NULL, "is_active" integer DEFAULT 1 NOT NULL, "uuid" character varying(32) NOT NULL, "deleted_at" timestamp, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150217232755"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddParentEntityIdToEntities (20150219154934)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "entities" ADD "parent_entity_id" integer[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150219154934"]]
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddIsActiveToEntities (20150221213946)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "entities" ADD "is_active" integer DEFAULT 1 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150221213946"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to AddIsActiveToContacts (20150221232106)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (2.5ms)[0m  [1mALTER TABLE "contacts" ADD "is_active" integer DEFAULT 1 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150221232106"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to AddIsActiveToLocations (20150225172448)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (3.1ms)[0m  [1mALTER TABLE "locations" ADD "is_active" integer DEFAULT 1 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150225172448"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (2.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'contacts'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'customers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'entities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'locations'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'salespeople'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users_roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'vendors'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'version_associations'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "roles" DISABLE TRIGGER ALL;ALTER TABLE "users_roles" DISABLE TRIGGER ALL;ALTER TABLE "version_associations" DISABLE TRIGGER ALL;ALTER TABLE "versions" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "salespeople" DISABLE TRIGGER ALL;ALTER TABLE "vendors" DISABLE TRIGGER ALL;ALTER TABLE "entities" DISABLE TRIGGER ALL;ALTER TABLE "contacts" DISABLE TRIGGER ALL;ALTER TABLE "locations" DISABLE TRIGGER ALL
  [1m[36m (1.4ms)[0m  [1m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE tablename !~ '_prt_' AND schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  select table_name from information_schema.views where table_schema = 'test_chancellor_engine'
  [1m[36m (43.4ms)[0m  [1mTRUNCATE TABLE "public"."schema_migrations", "public"."users", "public"."roles", "public"."users_roles", "public"."version_associations", "public"."versions", "public"."customers", "public"."salespeople", "public"."vendors", "public"."entities", "public"."contacts", "public"."locations" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "version_associations" ENABLE TRIGGER ALL;ALTER TABLE "versions" ENABLE TRIGGER ALL;ALTER TABLE "contacts" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "roles" ENABLE TRIGGER ALL;ALTER TABLE "users_roles" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "salespeople" ENABLE TRIGGER ALL;ALTER TABLE "vendors" ENABLE TRIGGER ALL;ALTER TABLE "entities" ENABLE TRIGGER ALL;ALTER TABLE "locations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
